/*!build time : 2014-04-10 2:54:56 PM*/
KISSY.add("kg/superbase/2.0.0/index",function(a,b,c){"use strict";function d(a){return a.substring(0,1).toUpperCase()+a.substring(1)}function e(b,c,d){function e(a,b){for(var c=a.length,d=0;c>d;d++)a[d].apply(this,b)}for(var f,g=0,h=d.length,i=[c[n]||function(){}],j=[c[o]||function(){}];h>g;g++)f=d[g].prototype,f[n]&&i.push(f[n]),f[o]&&j.unshift(f[o]);return c[n]=function(){e.call(this,i,a.makeArray(arguments))},c[o]=function(){e.call(this,j,a.makeArray(arguments))},b.__wrapInitializerFns=i,b.__wrapDestructorFns=j,c}function f(b){for(var c,d=0,e=b.length,f=this,g=f.__wrapInitializerFns,h=f.__wrapDestructorFns,i={},j={};e>d;d++)c=b[d].prototype,c[n]&&g.push(c[n]),c[o]&&h.unshift(c[o]);b=f.__extensions__=f.__extensions__.concat(b),a.each(b,function(b){a.each(b.ATTRS,function(b,c){i[c]=i[c]||{},a.mix(i,b)}),a.each(b.prototype,function(a,b){j[b]=a})}),a.mix(i,f.__originAttrs),a.mix(j,f.__originProto),a.mix(f.ATTRS,i),a.mix(f.prototype,j)}function g(b,c){return a.isArray(b)?void a.each(b,c):(b=a.trim(b),void(-1==b.indexOf(" ")?c(b):a.each(b.split(/\s+/),c)))}function h(b,c){var d=a.makeArray(arguments),e=d[2+c];e&&"object"==typeof e?a.each(e,function(a,e){var f=[].concat(d);f.splice(0,2),f[c]=e,f[c+1]=a,b.apply(null,f)}):g(e,function(a){var e=[].concat(d);e.splice(0,2),e[c]=a,b.apply(null,e)})}function i(a,b){var c=b.defaultFn,d=b.async;return function(b){var e=this,f=this[s+a+t]||c;f&&f.call(this,b),b.target!==this||b.isImmediatePropagationStopped()||(b.type=r+a,d?setTimeout(function(){e.fire(b.type,b)},0):this.fire(b.type,b))}}var j=b.prototype,k=/^.+Change$/,l=/^(after|before).+Change$/,m="__~ks_published_events",n="initializer",o="destructor",p="string",q="before",r="after",s="_def",t="Fn",u=b.extend({initializer:function(){this[m]={}},doBefore:function(a,b,d,e){return c.before(typeof a===p?this[a]:a,b,d,e||this)},doAfter:function(a,b,d,e){return c.after(typeof a===p?this[a]:a,b,d,e||this)},publish:function(b,c){var e=this;return g(b,function(b){var f=a.merge(c),g=d(b);return l.test(b)?void j.publish.call(e,b,f):(f.defaultFn=i(g,f),j.publish.call(e,b,f),delete f.defaultFn,j.publish.call(e,r+g,f),void(e[m][b]=1))}),this},on:function(a,b,c){var e=this;return h(function(a,b,c){k.test(a)&&!l.test(a)&&(a=q+d(a)),j.on.call(e,a,b,c)},0,a,b,c),this},before:function(){return this.on.apply(this,arguments)},after:function(a,b,c){var e=this;return h(function(a,b,c){e[m][a]||e.publish(a),j.on.call(e,r+d(a),b,c)},0,a,b,c),this},detachAfter:function(a,b,c){var e=this;return a?(h(function(a,b,c){j.detach.call(e,r+d(a),b,c)},0,a,b,c),this):this}});return u.extend=function(c,d,f){var g,h;return a.isArray(c)||(f=d,d=c,c=[]),f=f||{},h=f.ATTRS||(f.ATTRS={}),d=d||{},d=e(f,d,c),g=b.extend.call(this,c,d,f),g.extend=u.extend,g.mix=u.mix,g.__originAttrs=h,g.__originProto=d,g},u.mix=function(b){return!a.isArray(b)&&b&&(b=[b]),b&&f.call(this,b),this},u},{requires:["base","kg/aop/1.1/"]});